# Руководство пользователя TestApp GUI

## Содержание

1. [Введение](#введение)
2. [Интерфейс программы](#интерфейс-программы)
3. [Подключение к FPGA](#подключение-к-fpga)
4. [Версии IP-ядер](#версии-ip-ядер)
5. [Статус часов и источник тактирования](#статус-часов-и-источник-тактирования)
6. [Состояние GPIO](#состояние-gpio)
7. [Ширина импульса PPS](#ширина-импульса-pps)
8. [Мониторинг в реальном времени](#мониторинг-в-реальном-времени)
9. [Часто задаваемые вопросы](#часто-задаваемые-вопросы)

## Введение

TestApp GUI - это графический интерфейс для программы TestApp, которая взаимодействует с FPGA (Field-Programmable Gate Array) через PCI Express (PCIe) и предоставляет информацию о версиях IP-ядер, статусе часов и PPS (Pulse Per Second), а также позволяет отслеживать текущие состояния сигналов.

Данное руководство поможет вам разобраться с функциями программы и эффективно использовать её возможности.

## Интерфейс программы

Интерфейс TestApp GUI состоит из следующих основных элементов:

### Верхняя панель
- **Поле "Базовый адрес PCIe"** - для ввода базового адреса PCIe в формате 0xA0000000
- **Кнопка "Подключиться"** - для подключения к FPGA по указанному адресу
- **Кнопка "Отключиться"** - для отключения от FPGA

### Левая панель - Версии IP-ядер
Отображает версии различных IP-ядер FPGA:
- Версия образа FPGA
- Версия ядра Clock IP Core
- Версия ядра Signal TS IP Core (два экземпляра)
- Версия ядра PPS Master IP Core
- Версия ядра PPS Slave IP Core
- Версия ядра TOD Slave IP Core

### Правая панель - Статус
Отображает текущий статус:
- Статус часов (включены/выключены)
- Источник тактирования
- Состояние GPIO (с визуальными индикаторами)
- Ширина импульса PPS

### Нижняя панель
- **Кнопка "Запустить мониторинг"/"Остановить мониторинг"** - для управления автоматическим обновлением данных
- **Статусная строка** - для отображения текущего состояния программы и сообщений об ошибках

## Подключение к FPGA

Для подключения к FPGA необходимо:

1. Ввести базовый адрес PCIe в поле "Базовый адрес PCIe" в формате 0xA0000000
2. Нажать кнопку "Подключиться"

Базовый адрес PCIe должен соответствовать адресу, по которому FPGA отображена в память компьютера. Обычно этот адрес можно узнать с помощью команды `lspci -v` или из документации к вашему устройству FPGA.

После успешного подключения программа отобразит информацию о версиях IP-ядер и текущем статусе. Если подключение не удалось, в статусной строке будет отображено соответствующее сообщение об ошибке.

## Версии IP-ядер

В левой панели программы отображаются версии различных IP-ядер FPGA:

- **Версия образа FPGA** - версия прошивки FPGA
- **Clock IP Core** - версия ядра часов
- **Signal TS IP Core (1)** - версия первого ядра временных меток
- **Signal TS IP Core (2)** - версия второго ядра временных меток
- **PPS Master IP Core** - версия ядра генерации PPS
- **PPS Slave IP Core** - версия ядра приема PPS
- **TOD Slave IP Core** - версия ядра Time of Day

Версии отображаются в шестнадцатеричном формате (например, 0x1234).

## Статус часов и источник тактирования

В правой панели программы отображается информация о статусе часов и источнике тактирования:

### Статус часов
- **Включены** - часы работают
- **Выключены** - часы остановлены

### Источник тактирования
Возможные значения:
- **NONE** - нет источника тактирования
- **TOD** - Time of Day
- **IRIG** - IRIG-B
- **PPS** - Pulse Per Second
- **PTP** - Precision Time Protocol
- **RTC** - Real-Time Clock
- **DCF** - DCF77
- **REGS** - регистры
- **EXT** - внешний источник
- **Неизвестно** - неизвестный источник

## Состояние GPIO

В правой панели программы отображается состояние GPIO:

- **Состояние GPIO** - шестнадцатеричное значение (например, 0x01)
- **Индикаторы GPIO** - визуальное представление состояния каждого бита GPIO:
  - Зеленый индикатор - бит установлен (1)
  - Красный индикатор - бит сброшен (0)

Индикаторы расположены слева направо от младшего бита (бит 0) к старшему (бит 7).

## Ширина импульса PPS

В правой панели программы отображается ширина импульса PPS в наносекундах. Это значение показывает длительность импульса PPS, генерируемого или принимаемого FPGA.

## Мониторинг в реальном времени

Для мониторинга данных в реальном времени:

1. После подключения к FPGA нажмите кнопку "Запустить мониторинг"
2. Программа начнет автоматически обновлять данные каждую секунду
3. Для остановки мониторинга нажмите кнопку "Остановить мониторинг"

Во время мониторинга программа обновляет все отображаемые данные: статус часов, источник тактирования, состояние GPIO и ширину импульса PPS.

## Часто задаваемые вопросы

### Какой формат базового адреса PCIe должен быть?
Базовый адрес PCIe должен быть указан в шестнадцатеричном формате с префиксом 0x, например, 0xA0000000.

### Почему программа требует права root?
Программа требует права root для доступа к /dev/mem, который используется для отображения памяти FPGA в адресное пространство процесса.

### Как часто обновляются данные при мониторинге?
По умолчанию данные обновляются каждую секунду, как и в оригинальной программе TestApp.

### Что означают цвета индикаторов GPIO?
Зеленый цвет означает, что соответствующий бит установлен (1), а красный - что бит сброшен (0).

### Можно ли изменить частоту обновления данных?
В текущей версии программы частота обновления данных фиксирована и составляет 1 секунду. В будущих версиях может быть добавлена возможность настройки частоты обновления.

### Что делать, если программа не может подключиться к FPGA?
Убедитесь, что:
1. Вы ввели правильный базовый адрес PCIe
2. FPGA правильно подключена и настроена
3. У вас есть права root для доступа к /dev/mem
4. Необходимые драйверы PCIe установлены и работают корректно

